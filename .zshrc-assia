#!/bin/zsh
#########################################################
# ASSIA
export CLASS='trabajo'
export MAVEN_OPTS="-Xms1024m -Xmx4096m -XX:PermSize=1024m"

# Alias for very frequent SSH connections
alias p='ssh pganuza@pganuza-dev.assia-inc.com'
alias q='sshrc user@qa-dev.assia-inc.com'
alias l='sshrc pganuza@lexus.assia-inc.com'
alias se='sshrc user@$ENV.assia-inc.com'
alias a='sshrc user@demo-a.assia-inc.com'
alias b='sshrc user@demo-b.assia-inc.com'
alias c='sshrc user@demo-c.assia-inc.com'

# CVS configuration
export CVSROOT=:ext:pganuza@rc-cvs-01.assia-inc.com:/cvs
alias cvs-update='cvs update -PAd'
alias cvs-discard_changes='cvs-update -C'
alias cvs-checkout='cvs co -r'

# Download SQL files from a release
alias wget_sqls='wget -r -np -l1 -R "index.html*" --no-directories '

# Add paths where I store scripts
export PATH=$PATH:$HOME/.sqlcl/bin

# Connect to a database
function dbconn() {
	if [ $# -ne 0 ]; then
		sqlcl $1/assia@db-ref.assia-inc.com:1521:dslo2 @$2
	else
		echo "Connecting to $CUS_DB..."
		sqlcl $CUS_DB/assia@db-ref.assia-inc.com:1521:dslo2
	fi
}

# Start a tmux session and name it after the ticket number
get_ticket_number_from_path(){
	export ticket=$(pwd | grep -E "[a-zA-Z]+-[0-9]+( |$)" -o | sed "s/ //")
}
mt(){
	export DIR=$(pwd)
	get_ticket_number_from_path
	#tmux -f /home/pganuza/.config/tmux/tmux.conf new -s $ticket -n Notas
	#tmux attach-session -t . -c $(pwd)
	tmux rename-session $ticket
	tmux rename-window Notas
}
et(){
	get_ticket_number_from_path
	$EDITOR $ticket.md
}

# Currently working
export CUS_ENV='demo-a'
export CUS_NAME='Generic'
export CUS_NAME_N=$(echo $CUS_NAME | tr ' ' _)
export CUS_PREFIX='G'
export CUS_VER='5.3.3'
export CUS_DB='demo_a'
export DBF='plain'
export CUS_DIR="$HOME/Trabajo/Releases/$CUS_NAME_N/$CUS_PREFIX-$CUS_VER"
alias cdir='cd $CUS_DIR'
